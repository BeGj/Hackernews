"use strict";(self.webpackChunkangular16=self.webpackChunkangular16||[]).push([[561],{9561:(v,_,o)=>{o.r(_),o.d(_,{StoryViewComponent:()=>C});var i=o(5093),u=o(4599),l=o(4318),f=o(808),g=o(8730),y=o(4273),h=o(7292),m=o(2523),t=o(2509),d=o(6038),p=o(3779);function E(e,s){if(1&e&&t._UZ(0,"iframe",10),2&e){const n=t.oxw().ngIf,r=t.oxw();t.Q6J("src",r.sanitizer.bypassSecurityTrustResourceUrl(n.url),t.uOi)}}const x=function(e){return["/user",e]};function I(e,s){if(1&e){const n=t.EpF();t.ynx(0),t.TgZ(1,"h1",3),t._uU(2),t.qZA(),t.TgZ(3,"p",4),t._uU(4),t.ALo(5,"date"),t.TgZ(6,"a",5),t._uU(7),t.qZA()(),t.TgZ(8,"section",6)(9,"button",7),t.NdJ("click",function(){t.CHM(n);const c=t.oxw();return t.KtG(c.linkIframeVisible.next(!c.linkIframeVisible.value))}),t._uU(10," Open story with comments "),t.qZA(),t.TgZ(11,"a",8),t._uU(12," Open story in new tab "),t.qZA()(),t.YNc(13,E,1,1,"iframe",9),t.ALo(14,"async"),t.BQk()}if(2&e){const n=s.ngIf,r=t.oxw();t.xp6(2),t.Oqu(n.title),t.xp6(2),t.hij(" ",t.xi3(5,6,1e3*n.time,"medium")," by "),t.xp6(2),t.Q6J("routerLink",t.VKq(11,x,n.by)),t.xp6(1),t.hij(" ",n.by,""),t.xp6(4),t.Q6J("href",n.url,t.LSH),t.xp6(2),t.Q6J("ngIf",!0===t.lcZ(14,9,r.linkIframeVisible))}}function O(e,s){if(1&e&&(t.TgZ(0,"div",13)(1,"p",4)(2,"a",5),t._uU(3),t.qZA(),t._uU(4),t.ALo(5,"date"),t.qZA(),t._UZ(6,"p",14),t.qZA()),2&e){const n=s.$implicit,r=t.oxw(2);t.xp6(2),t.Q6J("routerLink",t.VKq(7,x,n.by)),t.xp6(1),t.hij(" ",n.by,""),t.xp6(1),t.hij(" at ",t.xi3(5,4,1e3*n.time,"medium")," "),t.xp6(2),t.Q6J("innerHTML",r.sanitizer.bypassSecurityTrustHtml(n.text),t.oJD)}}function T(e,s){if(1&e&&(t.TgZ(0,"section",11),t.YNc(1,O,7,9,"div",12),t.qZA()),2&e){const n=s.ngIf;t.xp6(1),t.Q6J("ngForOf",n)}}let C=(()=>{class e{set storyId(n){this.storyIdChanged$.next(n)}constructor(n,r,c){this.hn=n,this.sanitizer=r,this.title=c,this.storyIdChanged$=new u.t,this.story$=this.storyIdChanged$.pipe((0,l.b)(a=>this.hn.fetchStory(a)),(0,f.b)(a=>{this.title.setTitle(`Story: ${a.title}`)}),(0,g.d)()),this.comments$=this.story$.pipe((0,l.b)(a=>(0,y.D)(a.kids.map(D=>this.hn.fetchComment(D))))),this.linkIframeVisible=new h.X(!1)}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(d.c),t.Y36(p.H7),t.Y36(p.Dx))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-story-view"]],inputs:{storyId:"storyId"},standalone:!0,features:[t.jDz],decls:5,vars:6,consts:[[1,"container","mx-auto"],[4,"ngIf"],["class","flex flex-col space-y-4",4,"ngIf"],[1,"text-lg"],[1,"text-sm","text-gray-600"],[1,"hover:underline","underline-offset-2","decoration-orange-600",3,"routerLink"],[1,"flex","flex-row","my-2","space-x-5"],[1,"px-2","py-1","text-sm","transition-colors","bg-orange-600","rounded-md","hover:bg-orange-700","text-orange-50",3,"click"],["target","_blank",1,"px-2","py-1","text-sm","transition-colors","bg-orange-600","rounded-md","hover:bg-orange-700","text-orange-50",3,"href"],["class","h-[80vh] mx-auto w-[100%]","frameborder","0",3,"src",4,"ngIf"],["frameborder","0",1,"h-[80vh]","mx-auto","w-[100%]",3,"src"],[1,"flex","flex-col","space-y-4"],["class","",4,"ngFor","ngForOf"],[1,""],[1,"ml-2","prose-sm","prose",3,"innerHTML"]],template:function(n,r){1&n&&(t.TgZ(0,"section",0),t.YNc(1,I,15,13,"ng-container",1),t.ALo(2,"async"),t.YNc(3,T,2,1,"section",2),t.ALo(4,"async"),t.qZA()),2&n&&(t.xp6(1),t.Q6J("ngIf",t.lcZ(2,2,r.story$)),t.xp6(2),t.Q6J("ngIf",t.lcZ(4,4,r.comments$)))},dependencies:[i.ez,i.sg,i.O5,i.Ov,i.uU,m.Bz,m.rH],changeDetection:0}),e})()}}]);